# üìß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –û–±–∑–æ—Ä

WeddingTech UZ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è:
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ùå –û—Ç–º–µ–Ω—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- üîî –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö (–∑–∞ 7 –¥–Ω–µ–π)
- üí≥ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã

### 1. Resend (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
**–ü–æ—á–µ–º—É Resend:**
- –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 3000 –ø–∏—Å–µ–º/–º–µ—Å—è—Ü
- –û—Ç–ª–∏—á–Ω–∞—è –¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ—Å—Ç—å
- –ü—Ä–æ—Å—Ç–æ–π API

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
# 1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ resend.com
# 2. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á
# 3. –î–æ–±–∞–≤—å—Ç–µ –≤ Lovable Cloud Secrets:
RESEND_API_KEY=re_xxxxxxxxxxxx
```

**–ö–æ–¥ –≤ edge function (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ):**
```typescript
const RESEND_API_KEY = Deno.env.get('RESEND_API_KEY')
const emailResponse = await fetch('https://api.resend.com/emails', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${RESEND_API_KEY}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    from: 'WeddingTech UZ <notifications@weddingtech.uz>',
    to: [to],
    subject: template.subject,
    html: template.html
  })
})
```

### 2. SendGrid
**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
SENDGRID_API_KEY=SG.xxxxxxxxxxxx
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
```typescript
const sgMail = require('@sendgrid/mail')
sgMail.setApiKey(process.env.SENDGRID_API_KEY)

const msg = {
  to: to,
  from: 'notifications@weddingtech.uz',
  subject: template.subject,
  html: template.html,
}

await sgMail.send(msg)
```

### 3. AWS SES
**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
AWS_ACCESS_KEY_ID=AKIAXXXXXXXX
AWS_SECRET_ACCESS_KEY=xxxxxxxxxxxx
AWS_REGION=us-east-1
```

### 4. Mailgun
**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
MAILGUN_API_KEY=xxxxxxxxxxxx
MAILGUN_DOMAIN=mg.weddingtech.uz
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Lovable
2. Settings ‚Üí Cloud ‚Üí Secrets
3. –î–æ–±–∞–≤—å—Ç–µ API –∫–ª—é—á –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
4. Edge function –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏—Ç –¥–æ—Å—Ç—É–ø

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–°–µ–π—á–∞—Å edge function –ª–æ–≥–∏—Ä—É–µ—Ç emails –≤ –∫–æ–Ω—Å–æ–ª—å:
```javascript
console.log('Email would be sent:', {
  to,
  subject: template.subject,
  html: template.html
})
```

### –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–∏—Å–∞
1. –°–æ–∑–¥–∞–π—Ç–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–∫–∞–∫ vendor)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ edge function –≤ Cloud

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ email —à–∞–±–ª–æ–Ω–æ–≤

### Booking Confirmed
```
‚úÖ –í–∞—à–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ!

–î–∞—Ç–∞: 15 –¥–µ–∫–∞–±—Ä—è 2025
–°—Ç–æ–∏–º–æ—Å—Ç—å: 5,000,000 UZS
–ü—Ä–∏–º–µ—á–∞–Ω–∏—è: ...
```

### Booking Cancelled
```
‚ùå –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ

–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –¥—Ä—É–≥–∏—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –≤ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ.
```

### Event Reminder
```
üîî –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–µ–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏

–í–∞—à–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π!
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –≥–æ—Ç–æ–≤–æ.
```

### Payment Confirmed
```
üí≥ –û–ø–ª–∞—Ç–∞ —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω–∞

–°—É–º–º–∞: 5,000,000 UZS
–ü—Ä–æ–≤–∞–π–¥–µ—Ä: Payme
ID: xxxx-xxxx-xxxx
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö:
- Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–≤–∫–ª/–≤—ã–∫–ª)
- Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º
- –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤

–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ edge function:
```typescript
const { data: preferences } = await supabase
  .from('notification_preferences')
  .select('email_notifications')
  .eq('user_id', userId)
  .single()

if (!preferences.email_notifications) {
  return // Don't send
}
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã

### –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è emails:

1. **Booking Confirmed** - –∫–æ–≥–¥–∞ vendor –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ "confirmed"
2. **Booking Cancelled** - –∫–æ–≥–¥–∞ —Å—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "cancelled"
3. **Payment Confirmed** - –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ webhook
4. **Event Reminder** - –∑–∞ 7 –¥–Ω–µ–π –¥–æ –¥–∞—Ç—ã (—Ç—Ä–µ–±—É–µ—Ç cron job)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è

–î–ª—è production –Ω—É–∂–Ω–æ:
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, weddingtech.uz)
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS –∑–∞–ø–∏—Å–∏ (SPF, DKIM, DMARC)
3. –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Å–µ—Ä–≤–∏—Å–µ
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å email: notifications@weddingtech.uz

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:
- –î–æ—Å—Ç–∞–≤–ª—è–µ–º–æ—Å—Ç—å (delivery rate)
- –û—Ç–∫—Ä—ã–≤–∞–µ–º–æ—Å—Ç—å (open rate)
- –û—Ç–∫–∞–∑—ã (bounces)
- –ñ–∞–ª–æ–±—ã (complaints)

–í—Å–µ —ç—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –ø–∞–Ω–µ–ª—è—Ö email —Å–µ—Ä–≤–∏—Å–æ–≤.

## Troubleshooting

### Emails –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á –≤ Secrets
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ edge function
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∞–º –ø–∞–ø–∫—É
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –¥–æ–º–µ–Ω –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω

### Emails –≤ —Å–ø–∞–º–µ
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SPF, DKIM, DMARC
- –ü—Ä–æ–≥—Ä–µ–π—Ç–µ –¥–æ–º–µ–Ω (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ –æ–±—ä–µ–º)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–≤–æ–π–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏

### –û—à–∏–±–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç email –∞–¥—Ä–µ—Å–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ API –∑–∞–ø—Ä–æ—Å–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã —Å–µ—Ä–≤–∏—Å–∞

## –†–∞—Å—à–∏—Ä–µ–Ω–∏—è

–í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
- [ ] Scheduled reminders (cron jobs)
- [ ] Email templates –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
- [ ] –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- [ ] Attachment –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (PDF —Å—á–µ—Ç–∞)
- [ ] Unsubscribe links
- [ ] Email analytics dashboard
